@import "../common/_base";
@import "../common/common-styling-config";

$grid-content-selector: "& > [slot='grid-content']:not(virtual-scroller), & > * > .scrollable-content";

// Used to horizontally and vertically align the text and image
@mixin empty-placeholder-alignment(
  $text-align: null,
  $justify-content: null,
  $align-items: null
) {
  & > .grid-empty-placeholder > div > .gx-empty-indicator > .gx-empty-item {
    // Alignment for the gx-textblock control
    @if $text-align != null {
      > gx-textblock {
        text-align: $text-align;
      }
    }
    @if $align-items != null {
      > gx-textblock::part(valign) {
        align-items: $align-items;
      }
    }

    // Alignment for the gx-image control
    @if $justify-content != null or $align-items != null {
      > gx-image {
        @if $justify-content != null {
          justify-content: $justify-content;
        }
        @if $align-items != null {
          align-self: $align-items;
        }
      }
    }
  }
}

[align="left"] > .gx-grid-empty {
  @include empty-placeholder-alignment(start, flex-start);
}

[align="center"] > .gx-grid-empty {
  @include empty-placeholder-alignment(center, center);
}

[align="right"] > .gx-grid-empty {
  @include empty-placeholder-alignment(end, flex-end);
}

[valign="top"] > .gx-grid-empty {
  @include empty-placeholder-alignment($align-items: flex-start);
}

[valign="middle"] > .gx-grid-empty {
  @include empty-placeholder-alignment($align-items: center);
}

[valign="bottom"] > .gx-grid-empty {
  @include empty-placeholder-alignment($align-items: flex-end);
}

.gx-grid-base {
  @include transition-properties();
  flex: 1;
  align-self: stretch;
  overflow: hidden; // Required for gx-loading's positioning

  #{$grid-content-selector} {
    flex: 1;
  }

  & > .grid-empty-placeholder {
    @include visibility(none);
  }

  & > .grid-empty-placeholder > [slot="grid-content-empty"] {
    flex: 1;
    align-self: stretch;
  }
}

// Show the empty placeholder if the grid was loaded with no items
.gx-grid-base.gx-grid-empty:not(.gx-grid-loading) {
  & > :first-child {
    @include visibility(none);
  }

  .grid-empty-placeholder {
    @include visibility(flex);
    flex: 1;
    height: 100%;
  }
}

.gx-grid-base.gx-grid-empty {
  #{$grid-content-selector},
  .gx-grid-paging {
    @include visibility(none);
  }
}

// The grid is loading
.gx-grid-base.gx-grid-empty-loading {
  & > :first-child {
    @include visibility(none);
  }
}

// If the grid loaded, hide the loader (slot="grid-empty-loading-placeholder")
.gx-grid-base:not(.gx-grid-empty-loading) > gx-loading {
  display: none;
}
